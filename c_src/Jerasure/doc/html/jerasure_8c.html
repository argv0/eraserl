<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Jerasure: jerasure.c File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Jerasure
   &#160;<span id="projectnumber">1.2</span>
   </div>
   <div id="projectbrief">A Library in C/C++ Facilitating Erasure Coding for Storage Applications</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">jerasure.c File Reference</div>  </div>
</div>
<div class="contents">
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="galois_8h_source.html">galois.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="jerasure_8h_source.html">jerasure.h</a>&quot;</code><br/>
</div><table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="jerasure_8c.html#a952a72cead1356661549e3e8c699d699">talloc</a>(type, num)&#160;&#160;&#160;(type *) malloc(sizeof(type)*(num))</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="jerasure_8c.html#a82af32a83686762b8d3333707cfad155">jerasure_print_matrix</a> (int *m, int rows, int cols, int w)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="jerasure_8c.html#a9438133760db4ebba402978f59e5a5e5">jerasure_print_bitmatrix</a> (int *m, int rows, int cols, int w)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="jerasure_8c.html#aa4166dae3d47c8734473aaa41b1ab9c4">jerasure_make_decoding_matrix</a> (int k, int m, int w, int *matrix, int *erased, int *decoding_matrix, int *dm_ids)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="jerasure_8c.html#ad1bb5971c4fdee7c4c50fb46d6ef9c2f">jerasure_make_decoding_bitmatrix</a> (int k, int m, int w, int *matrix, int *erased, int *decoding_matrix, int *dm_ids)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="jerasure_8c.html#a0d1a29afe55b6f1d8b09a1df6994f4dc">jerasure_matrix_decode</a> (int k, int m, int w, int *matrix, int row_k_ones, int *erasures, char **data_ptrs, char **coding_ptrs, int size)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="jerasure_8c.html#a45bbbfa1c3681a7be4bb2082984edbdd">jerasure_matrix_to_bitmatrix</a> (int k, int m, int w, int *matrix)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="jerasure_8c.html#a754e34d11221cab5e66841576583cd8f">jerasure_matrix_encode</a> (int k, int m, int w, int *matrix, char **data_ptrs, char **coding_ptrs, int size)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="jerasure_8c.html#a45f9cda66c9b596b8ec2be5545b55b1a">jerasure_bitmatrix_dotprod</a> (int k, int w, int *bitmatrix_row, int *src_ids, int dest_id, char **data_ptrs, char **coding_ptrs, int size, int packetsize)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="jerasure_8c.html#aaa052851dd4e60941d8ca83159803a4f">jerasure_do_parity</a> (int k, char **data_ptrs, char *parity_ptr, int size)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="jerasure_8c.html#aa134c10efabbe8620ba8de7ebe37c0f5">jerasure_invert_matrix</a> (int *mat, int *inv, int rows, int w)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="jerasure_8c.html#ac2ca8b6489e85f209a040a9038347189">jerasure_invertible_matrix</a> (int *mat, int rows, int w)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="jerasure_8c.html#a5ed25b377aa00ab5abe44c6ba58935a5">jerasure_erasures_to_erased</a> (int k, int m, int *erasures)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="jerasure_8c.html#a124c9f3182a9f9117776a6b86da63201">jerasure_free_schedule</a> (int **schedule)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="jerasure_8c.html#adfc3cbe91ca6a418329eee7810887c57">jerasure_free_schedule_cache</a> (int k, int m, int ***cache)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="jerasure_8c.html#ae64314475c098664deb5eb2b9f1d41aa">jerasure_matrix_dotprod</a> (int k, int w, int *matrix_row, int *src_ids, int dest_id, char **data_ptrs, char **coding_ptrs, int size)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="jerasure_8c.html#a1436fa741650a7cb75ecbd6e2cd6225b">jerasure_bitmatrix_decode</a> (int k, int m, int w, int *bitmatrix, int row_k_ones, int *erasures, char **data_ptrs, char **coding_ptrs, int size, int packetsize)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="jerasure_8c.html#aa2a3886ab7cb52edfa22739843d0548e">jerasure_schedule_decode_lazy</a> (int k, int m, int w, int *bitmatrix, int *erasures, char **data_ptrs, char **coding_ptrs, int size, int packetsize, int smart)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="jerasure_8c.html#ad645cd0b56d0ffcd0ffc2d17b17cdec0">jerasure_schedule_decode_cache</a> (int k, int m, int w, int ***scache, int *erasures, char **data_ptrs, char **coding_ptrs, int size, int packetsize)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int ***&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="jerasure_8c.html#ac4c2ec8a0b51756f7ebb58edff76db0d">jerasure_generate_schedule_cache</a> (int k, int m, int w, int *bitmatrix, int smart)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="jerasure_8c.html#a846d044f23cb83c703bfa71569d3b172">jerasure_invert_bitmatrix</a> (int *mat, int *inv, int rows)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="jerasure_8c.html#ae5140c0bccef55376dbd9aaed589a8ea">jerasure_invertible_bitmatrix</a> (int *mat, int rows)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="jerasure_8c.html#a2f092437db38d3078058679634dcd27b">jerasure_matrix_multiply</a> (int *m1, int *m2, int r1, int c1, int r2, int c2, int w)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="jerasure_8c.html#ab579e73d367c8db28bf75ee75c1cf17f">jerasure_get_stats</a> (double *fill_in)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="jerasure_8c.html#a5430f322b65d032a0fc6ff766b4b0c95">jerasure_do_scheduled_operations</a> (char **ptrs, int **operations, int packetsize)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="jerasure_8c.html#a5b4bbb1fe3a6ca30468d8d021ee7dc8d">jerasure_schedule_encode</a> (int k, int m, int w, int **schedule, char **data_ptrs, char **coding_ptrs, int size, int packetsize)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int **&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="jerasure_8c.html#a3a5d41811a6385a6d20230cb6d76b553">jerasure_dumb_bitmatrix_to_schedule</a> (int k, int m, int w, int *bitmatrix)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int **&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="jerasure_8c.html#a419871f932d9c6ada171eab27ef220d6">jerasure_smart_bitmatrix_to_schedule</a> (int k, int m, int w, int *bitmatrix)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="jerasure_8c.html#a99834efc875053378999f3a44b29defb">jerasure_bitmatrix_encode</a> (int k, int m, int w, int *bitmatrix, char **data_ptrs, char **coding_ptrs, int size, int packetsize)</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a952a72cead1356661549e3e8c699d699"></a><!-- doxytag: member="jerasure.c::talloc" ref="a952a72cead1356661549e3e8c699d699" args="(type, num)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define talloc</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">type, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">num&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(type *) malloc(sizeof(type)*(num))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a1436fa741650a7cb75ecbd6e2cd6225b"></a><!-- doxytag: member="jerasure.c::jerasure_bitmatrix_decode" ref="a1436fa741650a7cb75ecbd6e2cd6225b" args="(int k, int m, int w, int *bitmatrix, int row_k_ones, int *erasures, char **data_ptrs, char **coding_ptrs, int size, int packetsize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int jerasure_bitmatrix_decode </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>w</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>bitmatrix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>row_k_ones</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>erasures</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>data_ptrs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>coding_ptrs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>packetsize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">k</td><td>Number of data devices </td></tr>
    <tr><td class="paramname">m</td><td>Number of coding devices </td></tr>
    <tr><td class="paramname">w</td><td>Word size </td></tr>
    <tr><td class="paramname">bitmatrix</td><td>Array of k*m*w*w integers. It represents an mw by kw matrix. Element i,j is in matrix[i*k*w+j] </td></tr>
    <tr><td class="paramname">erasures</td><td>Array of id's of erased devices. Id's are integers between 0 and k+m-1. Id's 0 to k-1 are id's of data devices. Id's k to k+m-1 are id's of coding devices: Coding device id = id-k. If there are e erasures, erasures[e] = -1. </td></tr>
    <tr><td class="paramname">data_ptrs</td><td>Array of k pointers to data which is size bytes. Size must be a multiple of sizeof(long). Pointers must also be longword aligned. </td></tr>
    <tr><td class="paramname">coding_ptrs</td><td>Array of m pointers to coding data which is size bytes </td></tr>
    <tr><td class="paramname">size</td><td>Size of memory allocated by coding_ptrs/data_ptrs in bytes. </td></tr>
    <tr><td class="paramname">packetsize</td><td>The size of a coding block with bitmatrix coding. When you code with a bitmatrix, you will use w packets of size packetsize. </td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000011">Todo:</a></b></dt><dd><p class="startdd">return data </p>
<p>formula </p>
<p>fix </p>
<p>example code </p>
<p>description </p>
<p class="enddd">references </p>
</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="jerasure_8h.html#a0d1a29afe55b6f1d8b09a1df6994f4dc">jerasure_matrix_decode(int k, int m, int w, int *matrix, int row_k_ones, int *erasures, char **data_ptrs, char **coding_ptrs, int size)</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a45f9cda66c9b596b8ec2be5545b55b1a"></a><!-- doxytag: member="jerasure.c::jerasure_bitmatrix_dotprod" ref="a45f9cda66c9b596b8ec2be5545b55b1a" args="(int k, int w, int *bitmatrix_row, int *src_ids, int dest_id, char **data_ptrs, char **coding_ptrs, int size, int packetsize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void jerasure_bitmatrix_dotprod </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>w</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>bitmatrix_row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>src_ids</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dest_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>data_ptrs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>coding_ptrs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>packetsize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">k</td><td>Number of data devices </td></tr>
    <tr><td class="paramname">w</td><td>Word size </td></tr>
    <tr><td class="paramname">data_ptrs</td><td>Array of k pointers to data which is size bytes. Size must be a multiple of sizeof(long). Pointers must also be longword aligned. </td></tr>
    <tr><td class="paramname">coding_ptrs</td><td>Array of m pointers to coding data which is size bytes </td></tr>
    <tr><td class="paramname">size</td><td>Size of memory allocated by coding_ptrs/data_ptrs in bytes. </td></tr>
    <tr><td class="paramname">packetsize</td><td>The size of a coding block with bitmatrix coding. When you code with a bitmatrix, you will use w packets of size packetsize. </td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000018">Todo:</a></b></dt><dd><p class="startdd">fix </p>
<p>example code </p>
<p class="enddd">description </p>
</dd></dl>

</div>
</div>
<a class="anchor" id="a99834efc875053378999f3a44b29defb"></a><!-- doxytag: member="jerasure.c::jerasure_bitmatrix_encode" ref="a99834efc875053378999f3a44b29defb" args="(int k, int m, int w, int *bitmatrix, char **data_ptrs, char **coding_ptrs, int size, int packetsize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void jerasure_bitmatrix_encode </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>w</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>bitmatrix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>data_ptrs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>coding_ptrs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>packetsize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function encodes a matrix with a bit-matrix in <img class="formulaInl" alt="$GF(2^w)$" src="form_0.png"/>. <img class="formulaInl" alt="$w$" src="form_4.png"/> my be any number between 1 and 32. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">k</td><td>Number of data devices </td></tr>
    <tr><td class="paramname">m</td><td>Number of coding devices </td></tr>
    <tr><td class="paramname">w</td><td>Word size </td></tr>
    <tr><td class="paramname">bitmatrix</td><td>Array of k*m*w*w integers. It represents an mw by kw matrix. Element i,j is in matrix[i*k*w+j] </td></tr>
    <tr><td class="paramname">data_ptrs</td><td>Array of k pointers to data which is size bytes. Size must be a multiple of sizeof(long). Pointers must also be longword aligned. </td></tr>
    <tr><td class="paramname">coding_ptrs</td><td>Array of m pointers to coding data which is size bytes </td></tr>
    <tr><td class="paramname">size</td><td>Size of memory allocated by data_ptrs in bytes. </td></tr>
    <tr><td class="paramname">packetsize</td><td>The size of a coding block with bitmatrix coding. When you code with a bitmatrix, you will use w packets of size packetsize. </td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000008">Todo:</a></b></dt><dd>example code </dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="jerasure_8h.html#a754e34d11221cab5e66841576583cd8f">jerasure_matrix_encode(int k, int m, int w, int *matrix, char **data_ptrs, char **coding_ptrs, int size)</a> </dd></dl>

</div>
</div>
<a class="anchor" id="aaa052851dd4e60941d8ca83159803a4f"></a><!-- doxytag: member="jerasure.c::jerasure_do_parity" ref="aaa052851dd4e60941d8ca83159803a4f" args="(int k, char **data_ptrs, char *parity_ptr, int size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void jerasure_do_parity </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>data_ptrs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>parity_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function calculates the parity of size bytes of data from each of k regions of memory accessed by data_ptrs. It put the result into the size pointed to by parity_ptr. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">k</td><td>Number of data devices </td></tr>
    <tr><td class="paramname">data_ptrs</td><td>Array of k pointers to data which is size bytes. Size must be a multiple of sizeof(long). Pointers must also be longword aligned. </td></tr>
    <tr><td class="paramname">size</td><td>Size of memory allocated by data_ptrs in bytes. </td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000007">Todo:</a></b></dt><dd><p class="startdd">fix </p>
<p class="enddd">example code </p>
</dd></dl>

</div>
</div>
<a class="anchor" id="a5430f322b65d032a0fc6ff766b4b0c95"></a><!-- doxytag: member="jerasure.c::jerasure_do_scheduled_operations" ref="a5430f322b65d032a0fc6ff766b4b0c95" args="(char **ptrs, int **operations, int packetsize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void jerasure_do_scheduled_operations </td>
          <td>(</td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>ptrs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int **&#160;</td>
          <td class="paramname"><em>schedule</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>packetsize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function executes the schedule on w*packetsize worth of bytes from each device. ptrs is an array of pointers which should have as many elements as the highest referenced device in the schedule. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">schedule</td><td>Array of schedule operations. If there are m operations, then schedule[m][0] = -1. </td></tr>
    <tr><td class="paramname">packetsize</td><td>The size of a coding block with bitmatrix coding. When you code with a bitmatrix, you will use w packets of size packetsize. </td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000019">Todo:</a></b></dt><dd><p class="startdd">fix </p>
<p class="enddd">example code </p>
</dd></dl>

</div>
</div>
<a class="anchor" id="a3a5d41811a6385a6d20230cb6d76b553"></a><!-- doxytag: member="jerasure.c::jerasure_dumb_bitmatrix_to_schedule" ref="a3a5d41811a6385a6d20230cb6d76b553" args="(int k, int m, int w, int *bitmatrix)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int** jerasure_dumb_bitmatrix_to_schedule </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>w</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>bitmatrix</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function turns a bitmatrix into a schedule using the straightforward algorithm -- just schedule the dot products defined by each row of the matrix.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">k</td><td>Number of data devices </td></tr>
    <tr><td class="paramname">m</td><td>Number of coding devices </td></tr>
    <tr><td class="paramname">w</td><td>Word size </td></tr>
    <tr><td class="paramname">bitmatrix</td><td>Array of k*m*w*w integers. It represents an mw by kw matrix. Element i,j is in matrix[i*k*w+j] </td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000002">Todo:</a></b></dt><dd><p class="startdd">return (int**) </p>
<p class="enddd">example code </p>
</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="jerasure_8h.html#a419871f932d9c6ada171eab27ef220d6">jerasure_smart_bitmatrix_to_schedule(int k, int m, int w, int *bitmatrix)</a> </dd>
<dd>
<a class="el" href="jerasure_8h.html#adfc3cbe91ca6a418329eee7810887c57">jerasure_free_schedule_cache(int k, int m, int ***cache)</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a5ed25b377aa00ab5abe44c6ba58935a5"></a><!-- doxytag: member="jerasure.c::jerasure_erasures_to_erased" ref="a5ed25b377aa00ab5abe44c6ba58935a5" args="(int k, int m, int *erasures)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int* jerasure_erasures_to_erased </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>erasures</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function allocates and returns erased from erasures. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">k</td><td>Number of data devices </td></tr>
    <tr><td class="paramname">m</td><td>Number of coding devices </td></tr>
    <tr><td class="paramname">erasures</td><td>Array of id's of erased devices. Id's are integers between 0 and k+m-1. Id's 0 to k-1 are id's of data devices. Id's k to k+m-1 are id's of coding devices: Coding device id = id-k. If there are e erasures, erasures[e] = -1. </td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000016">Todo:</a></b></dt><dd><p class="startdd">return data </p>
<p class="enddd">usage example </p>
</dd></dl>

</div>
</div>
<a class="anchor" id="a124c9f3182a9f9117776a6b86da63201"></a><!-- doxytag: member="jerasure.c::jerasure_free_schedule" ref="a124c9f3182a9f9117776a6b86da63201" args="(int **schedule)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void jerasure_free_schedule </td>
          <td>(</td>
          <td class="paramtype">int **&#160;</td>
          <td class="paramname"><em>schedule</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function frees a schedule that was allocated with jerasure_XXX_bitmatrix_to_schedule. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">schedule</td><td>Array of schedule operations. If there are m operations, then schedule[m][0] = -1. </td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000005">Todo:</a></b></dt><dd>example code </dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="jerasure_8h.html#a3a5d41811a6385a6d20230cb6d76b553">jerasure_dumb_bitmatrix_to_schedule(int k, int m, int w, int *bitmatrix)</a> </dd>
<dd>
<a class="el" href="jerasure_8h.html#a419871f932d9c6ada171eab27ef220d6">jerasure_smart_bitmatrix_to_schedule(int k, int m, int w, int *bitmatrix)</a> </dd></dl>

</div>
</div>
<a class="anchor" id="adfc3cbe91ca6a418329eee7810887c57"></a><!-- doxytag: member="jerasure.c::jerasure_free_schedule_cache" ref="adfc3cbe91ca6a418329eee7810887c57" args="(int k, int m, int ***cache)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void jerasure_free_schedule_cache </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int ***&#160;</td>
          <td class="paramname"><em>cache</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function reads a schedule cache that was created with jerasure_generate_schedule_cache. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">k</td><td>Number of data devices </td></tr>
    <tr><td class="paramname">m</td><td>Number of coding devices </td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="jerasure_8h.html#ac4c2ec8a0b51756f7ebb58edff76db0d">jerasure_generate_schedule_cache(int k, int m, int w, int *bitmatrix, int smart)</a> </dd>
<dd>
<a class="el" href="jerasure_8h.html#a419871f932d9c6ada171eab27ef220d6">jerasure_smart_bitmatrix_to_schedule(int k, int m, int w, int *bitmatrix)</a> </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000006">Todo:</a></b></dt><dd><p class="startdd">fix </p>
<p class="enddd">example code </p>
</dd></dl>

</div>
</div>
<a class="anchor" id="ac4c2ec8a0b51756f7ebb58edff76db0d"></a><!-- doxytag: member="jerasure.c::jerasure_generate_schedule_cache" ref="ac4c2ec8a0b51756f7ebb58edff76db0d" args="(int k, int m, int w, int *bitmatrix, int smart)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int*** jerasure_generate_schedule_cache </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>w</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>bitmatrix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>smart</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function precalcalculate all the schedule for the given distribution bitmatrix. M must equal 2. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">k</td><td>Number of data devices </td></tr>
    <tr><td class="paramname">m</td><td>Number of coding devices </td></tr>
    <tr><td class="paramname">w</td><td>Word size </td></tr>
    <tr><td class="paramname">bitmatrix</td><td>Array of k*m*w*w integers. It represents an mw by kw matrix. Element i,j is in matrix[i*k*w+j] </td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="jerasure_8h.html#adfc3cbe91ca6a418329eee7810887c57">jerasure_free_schedule_cache(int k, int m, int ***cache)</a> </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000004">Todo:</a></b></dt><dd><p class="startdd">return data </p>
<p>fix </p>
<p class="enddd">example code </p>
</dd></dl>

</div>
</div>
<a class="anchor" id="ab579e73d367c8db28bf75ee75c1cf17f"></a><!-- doxytag: member="jerasure.c::jerasure_get_stats" ref="ab579e73d367c8db28bf75ee75c1cf17f" args="(double *fill_in)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void jerasure_get_stats </td>
          <td>(</td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>fill_in</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function fills in a vector of three doubles: fill_in[0] is the number of bytes that have been XOR'd, fill_in[1] is the number of bytes that have been copied, fill_in[2] is the number of bytes that have been multiplied by a constant in <img class="formulaInl" alt="$GF(2^w)$" src="form_0.png"/>. When <a class="el" href="jerasure_8c.html#ab579e73d367c8db28bf75ee75c1cf17f">jerasure_get_stats()</a> is called, it resets its values. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">fill_in</td><td>vector of three doubles to be filled <div class="fragment"><pre class="fragment"> <a class="code" href="jerasure_8c.html#ab579e73d367c8db28bf75ee75c1cf17f">jerasure_get_stats</a>(); <span class="comment">// reset all values</span>
</pre></div> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a846d044f23cb83c703bfa71569d3b172"></a><!-- doxytag: member="jerasure.c::jerasure_invert_bitmatrix" ref="a846d044f23cb83c703bfa71569d3b172" args="(int *mat, int *inv, int rows)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int jerasure_invert_bitmatrix </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>mat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>inv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rows</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000021">Todo:</a></b></dt><dd><p class="startdd">fix </p>
<p>return data </p>
<p class="enddd">description </p>
</dd></dl>

</div>
</div>
<a class="anchor" id="aa134c10efabbe8620ba8de7ebe37c0f5"></a><!-- doxytag: member="jerasure.c::jerasure_invert_matrix" ref="aa134c10efabbe8620ba8de7ebe37c0f5" args="(int *mat, int *inv, int rows, int w)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int jerasure_invert_matrix </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>mat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>inv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rows</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>w</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">w</td><td>Word size </td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000020">Todo:</a></b></dt><dd><p class="startdd">fix </p>
<p>return data </p>
<p>example code </p>
<p class="enddd">description </p>
</dd></dl>

</div>
</div>
<a class="anchor" id="ae5140c0bccef55376dbd9aaed589a8ea"></a><!-- doxytag: member="jerasure.c::jerasure_invertible_bitmatrix" ref="ae5140c0bccef55376dbd9aaed589a8ea" args="(int *mat, int rows)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int jerasure_invertible_bitmatrix </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>mat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rows</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000023">Todo:</a></b></dt><dd><p class="startdd">return data </p>
<p>fix </p>
<p class="enddd">description </p>
</dd></dl>

</div>
</div>
<a class="anchor" id="ac2ca8b6489e85f209a040a9038347189"></a><!-- doxytag: member="jerasure.c::jerasure_invertible_matrix" ref="ac2ca8b6489e85f209a040a9038347189" args="(int *mat, int rows, int w)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int jerasure_invertible_matrix </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>mat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rows</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>w</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">w</td><td>Word size </td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000022">Todo:</a></b></dt><dd><p class="startdd">fix </p>
<p>return data </p>
<p class="enddd">description </p>
</dd></dl>

</div>
</div>
<a class="anchor" id="ad1bb5971c4fdee7c4c50fb46d6ef9c2f"></a><!-- doxytag: member="jerasure.c::jerasure_make_decoding_bitmatrix" ref="ad1bb5971c4fdee7c4c50fb46d6ef9c2f" args="(int k, int m, int w, int *matrix, int *erased, int *decoding_matrix, int *dm_ids)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int jerasure_make_decoding_bitmatrix </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>w</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>matrix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>erased</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>decoding_matrix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>dm_ids</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function makes the k*k decoding matrix (or wk*wk bitmatrix) by taking the rows corresponding to k non-erased devices of the distribution matrix, and then inverting that matrix. You should already have allocated the decoding matrix and dm_ids, which is a vector of k integers. These will be filled in appropriately. dm_ids[i] is the id of element i of the survivors vector. I.e. row i of the decoding matrix times dm_ids equals data drive i. Both of these routines take "erased" instead of "erasures". Erased is a vector with k+m elements, which has 0 or 1 for each device's id, according to whether the device is erased. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">k</td><td>Number of data devices </td></tr>
    <tr><td class="paramname">m</td><td>Number of coding devices </td></tr>
    <tr><td class="paramname">w</td><td>Word size </td></tr>
    <tr><td class="paramname">matrix</td><td>Array of k*m integers. It represents an m by k matrix. Element i,j is in matrix[i*k+j] </td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000015">Todo:</a></b></dt><dd><p class="startdd">fix </p>
<p class="enddd">example code </p>
</dd></dl>

</div>
</div>
<a class="anchor" id="aa4166dae3d47c8734473aaa41b1ab9c4"></a><!-- doxytag: member="jerasure.c::jerasure_make_decoding_matrix" ref="aa4166dae3d47c8734473aaa41b1ab9c4" args="(int k, int m, int w, int *matrix, int *erased, int *decoding_matrix, int *dm_ids)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int jerasure_make_decoding_matrix </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>w</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>matrix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>erased</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>decoding_matrix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>dm_ids</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function makes the k*k decoding matrix (or wk*wk bitmatrix) by taking the rows corresponding to k non-erased devices of the distribution matrix, and then inverting that matrix. You should already have allocated the decoding matrix and dm_ids, which is a vector of k integers. These will be filled in appropriately. dm_ids[i] is the id of element i of the survivors vector. I.e. row i of the decoding matrix times dm_ids equals data drive i. Both of these routines take "erased" instead of "erasures". Erased is a vector with k+m elements, which has 0 or 1 for each device's id, according to whether the device is erased. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">k</td><td>Number of data devices </td></tr>
    <tr><td class="paramname">m</td><td>Number of coding devices </td></tr>
    <tr><td class="paramname">w</td><td>Word size </td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000014">Todo:</a></b></dt><dd><p class="startdd">fix </p>
<p>return data </p>
<p class="enddd">example code </p>
</dd></dl>

</div>
</div>
<a class="anchor" id="a0d1a29afe55b6f1d8b09a1df6994f4dc"></a><!-- doxytag: member="jerasure.c::jerasure_matrix_decode" ref="a0d1a29afe55b6f1d8b09a1df6994f4dc" args="(int k, int m, int w, int *matrix, int row_k_ones, int *erasures, char **data_ptrs, char **coding_ptrs, int size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int jerasure_matrix_decode </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>w</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>matrix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>row_k_ones</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>erasures</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>data_ptrs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>coding_ptrs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function decodes unsing a matrix in <img class="formulaInl" alt="$GF(2^w)$" src="form_0.png"/>, only when <img class="formulaInl" alt="$w$" src="form_4.png"/> = 8|16|32. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">k</td><td>Number of data devices </td></tr>
    <tr><td class="paramname">m</td><td>Number of coding devices </td></tr>
    <tr><td class="paramname">w</td><td>Word size </td></tr>
    <tr><td class="paramname">matrix</td><td>Array of k*m integers. It represents an m by k matrix. Element i,j is in matrix[i*k+j] </td></tr>
    <tr><td class="paramname">erasures</td><td>Array of id's of erased devices. Id's are integers between 0 and k+m-1. Id's 0 to k-1 are id's of data devices. Id's k to k+m-1 are id's of coding devices: Coding device id = id-k. If there are e erasures, erasures[e] = -1. </td></tr>
    <tr><td class="paramname">data_ptrs</td><td>Array of k pointers to data which is size bytes. Size must be a multiple of sizeof(long). Pointers must also be longword aligned. </td></tr>
    <tr><td class="paramname">coding_ptrs</td><td>Array of m pointers to coding data which is size bytes </td></tr>
    <tr><td class="paramname">size</td><td>Size of memory allocated by data_ptrs/coding_ptrs in bytes. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 if it worked, -1 if it failed </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000010">Todo:</a></b></dt><dd><p class="startdd">crossreferences </p>
<p class="enddd">example code </p>
</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="jerasure_8h.html#a1436fa741650a7cb75ecbd6e2cd6225b">jerasure_bitmatrix_decode(int k, int m, int w, int *bitmatrix, int row_k_ones, int *erasures, char **data_ptrs, char **coding_ptrs, int size, int packetsize)</a> </dd>
<dd>
<a class="el" href="jerasure_8h.html#a754e34d11221cab5e66841576583cd8f">jerasure_matrix_encode(int k, int m, int w, int *matrix, char **data_ptrs, char **coding_ptrs, int size)</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ae64314475c098664deb5eb2b9f1d41aa"></a><!-- doxytag: member="jerasure.c::jerasure_matrix_dotprod" ref="ae64314475c098664deb5eb2b9f1d41aa" args="(int k, int w, int *matrix_row, int *src_ids, int dest_id, char **data_ptrs, char **coding_ptrs, int size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void jerasure_matrix_dotprod </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>w</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>matrix_row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>src_ids</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dest_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>data_ptrs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>coding_ptrs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function only works when w = 8|16|32. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">k</td><td>Number of data devices </td></tr>
    <tr><td class="paramname">w</td><td>Word size </td></tr>
    <tr><td class="paramname">data_ptrs</td><td>Array of k pointers to data which is size bytes. Size must be a multiple of sizeof(long). Pointers must also be longword aligned. </td></tr>
    <tr><td class="paramname">coding_ptrs</td><td>Array of m pointers to coding data which is size bytes </td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000017">Todo:</a></b></dt><dd><p class="startdd">fix </p>
<p>sample code </p>
<p class="enddd">description </p>
</dd></dl>

</div>
</div>
<a class="anchor" id="a754e34d11221cab5e66841576583cd8f"></a><!-- doxytag: member="jerasure.c::jerasure_matrix_encode" ref="a754e34d11221cab5e66841576583cd8f" args="(int k, int m, int w, int *matrix, char **data_ptrs, char **coding_ptrs, int size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void jerasure_matrix_encode </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>w</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>matrix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>data_ptrs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>coding_ptrs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function encodes a matrix in <img class="formulaInl" alt="$GF(2^w)$" src="form_0.png"/>. <img class="formulaInl" alt="$w$" src="form_4.png"/> must be either 8, 16 or 32. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">k</td><td>Number of data devices </td></tr>
    <tr><td class="paramname">m</td><td>Number of coding devices </td></tr>
    <tr><td class="paramname">w</td><td>Word size </td></tr>
    <tr><td class="paramname">matrix</td><td>Array of k*m integers. It represents an m by k matrix. Element i,j is in matrix[i*k+j] </td></tr>
    <tr><td class="paramname">data_ptrs</td><td>Array of k pointers to data which is size bytes. Size must be a multiple of sizeof(long). Pointers must also be longword aligned. </td></tr>
    <tr><td class="paramname">coding_ptrs</td><td>Array of m pointers to coding data which is size bytes </td></tr>
    <tr><td class="paramname">size</td><td>Size of memory allocated by coding_ptrs in bytes. </td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="jerasure_8h.html#a0d1a29afe55b6f1d8b09a1df6994f4dc">jerasure_matrix_decode(int k, int m, int w, int *matrix, int row_k_ones, int *erasures, char **data_ptrs, char **coding_ptrs, int size)</a> </dd>
<dd>
void <a class="el" href="jerasure_8h.html#a99834efc875053378999f3a44b29defb">jerasure_bitmatrix_encode(int k, int m, int w, int *bitmatrix, char **data_ptrs, char **coding_ptrs, int size, int packetsize)</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a2f092437db38d3078058679634dcd27b"></a><!-- doxytag: member="jerasure.c::jerasure_matrix_multiply" ref="a2f092437db38d3078058679634dcd27b" args="(int *m1, int *m2, int r1, int c1, int r2, int c2, int w)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int* jerasure_matrix_multiply </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>m1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>m2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>r1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>c1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>r2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>c2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>w</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">w</td><td>Word size </td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000026">Todo:</a></b></dt><dd><p class="startdd">fix </p>
<p>return data </p>
<p class="enddd">description </p>
</dd></dl>

</div>
</div>
<a class="anchor" id="a45bbbfa1c3681a7be4bb2082984edbdd"></a><!-- doxytag: member="jerasure.c::jerasure_matrix_to_bitmatrix" ref="a45bbbfa1c3681a7be4bb2082984edbdd" args="(int k, int m, int w, int *matrix)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int* jerasure_matrix_to_bitmatrix </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>w</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>matrix</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function turns a <img class="formulaInl" alt="$m \times k$" src="form_2.png"/> matrix in <img class="formulaInl" alt="$GF(2^w)$" src="form_0.png"/> into a <img class="formulaInl" alt="$wm \times wk$" src="form_3.png"/> bitmatrix (in <img class="formulaInl" alt="$GF(2)$" src="form_1.png"/>). For a detailed explanation see: J. Blomer, M. Kalfane, M. Karpinski, R. Karp, M. Luby and D. Zuckerman: An XOR-based erasure-resilinet coding scheme. Technical Report TR-95-048, International Computer Science Institute, August 1995</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">k</td><td>Number of data devices </td></tr>
    <tr><td class="paramname">m</td><td>Number of coding devices </td></tr>
    <tr><td class="paramname">w</td><td>Word size </td></tr>
    <tr><td class="paramname">matrix</td><td>Array of k*m integers. It represents an m by k matrix. Element i,j is in matrix[i*k+j] </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>bit-matrix (int*) </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>example code </dd></dl>

</div>
</div>
<a class="anchor" id="a9438133760db4ebba402978f59e5a5e5"></a><!-- doxytag: member="jerasure.c::jerasure_print_bitmatrix" ref="a9438133760db4ebba402978f59e5a5e5" args="(int *m, int rows, int cols, int w)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void jerasure_print_bitmatrix </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>matrix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rows</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cols</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>w</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">matrix</td><td>Array of k*m integers. It represents an m by k matrix. Element i,j is in matrix[i*k+j] </td></tr>
    <tr><td class="paramname">w</td><td>Word size </td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000025">Todo:</a></b></dt><dd><p class="startdd">fix </p>
<p class="enddd">description </p>
</dd></dl>

</div>
</div>
<a class="anchor" id="a82af32a83686762b8d3333707cfad155"></a><!-- doxytag: member="jerasure.c::jerasure_print_matrix" ref="a82af32a83686762b8d3333707cfad155" args="(int *m, int rows, int cols, int w)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void jerasure_print_matrix </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>matrix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rows</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cols</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>w</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">matrix</td><td>Array of k*m integers. It represents an m by k matrix. Element i,j is in matrix[i*k+j] </td></tr>
    <tr><td class="paramname">w</td><td>Word size </td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000024">Todo:</a></b></dt><dd><p class="startdd">fix </p>
<p class="enddd">description </p>
</dd></dl>

</div>
</div>
<a class="anchor" id="ad645cd0b56d0ffcd0ffc2d17b17cdec0"></a><!-- doxytag: member="jerasure.c::jerasure_schedule_decode_cache" ref="ad645cd0b56d0ffcd0ffc2d17b17cdec0" args="(int k, int m, int w, int ***scache, int *erasures, char **data_ptrs, char **coding_ptrs, int size, int packetsize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int jerasure_schedule_decode_cache </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>w</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int ***&#160;</td>
          <td class="paramname"><em>scache</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>erasures</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>data_ptrs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>coding_ptrs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>packetsize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">k</td><td>Number of data devices </td></tr>
    <tr><td class="paramname">m</td><td>Number of coding devices </td></tr>
    <tr><td class="paramname">w</td><td>Word size </td></tr>
    <tr><td class="paramname">erasures</td><td>Array of id's of erased devices. Id's are integers between 0 and k+m-1. Id's 0 to k-1 are id's of data devices. Id's k to k+m-1 are id's of coding devices: Coding device id = id-k. If there are e erasures, erasures[e] = -1. </td></tr>
    <tr><td class="paramname">data_ptrs</td><td>Array of k pointers to data which is size bytes. Size must be a multiple of sizeof(long). Pointers must also be longword aligned. </td></tr>
    <tr><td class="paramname">coding_ptrs</td><td>Array of m pointers to coding data which is size bytes </td></tr>
    <tr><td class="paramname">size</td><td>Size of memory allocated by coding_ptrs/data_ptrs in bytes. </td></tr>
    <tr><td class="paramname">packetsize</td><td>The size of a coding block with bitmatrix coding. When you code with a bitmatrix, you will use w packets of size packetsize. </td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000013">Todo:</a></b></dt><dd><p class="startdd">return data </p>
<p>fix </p>
<p class="enddd">example code </p>
</dd></dl>

</div>
</div>
<a class="anchor" id="aa2a3886ab7cb52edfa22739843d0548e"></a><!-- doxytag: member="jerasure.c::jerasure_schedule_decode_lazy" ref="aa2a3886ab7cb52edfa22739843d0548e" args="(int k, int m, int w, int *bitmatrix, int *erasures, char **data_ptrs, char **coding_ptrs, int size, int packetsize, int smart)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int jerasure_schedule_decode_lazy </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>w</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>bitmatrix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>erasures</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>data_ptrs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>coding_ptrs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>packetsize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>smart</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function generates the schedule on the fly. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">k</td><td>Number of data devices </td></tr>
    <tr><td class="paramname">m</td><td>Number of coding devices </td></tr>
    <tr><td class="paramname">w</td><td>Word size </td></tr>
    <tr><td class="paramname">bitmatrix</td><td>Array of k*m*w*w integers. It represents an mw by kw matrix. Element i,j is in matrix[i*k*w+j] </td></tr>
    <tr><td class="paramname">erasures</td><td>Array of id's of erased devices. Id's are integers between 0 and k+m-1. Id's 0 to k-1 are id's of data devices. Id's k to k+m-1 are id's of coding devices: Coding device id = id-k. If there are e erasures, erasures[e] = -1. </td></tr>
    <tr><td class="paramname">data_ptrs</td><td>Array of k pointers to data which is size bytes. Size must be a multiple of sizeof(long). Pointers must also be longword aligned. </td></tr>
    <tr><td class="paramname">coding_ptrs</td><td>Array of m pointers to coding data which is size bytes </td></tr>
    <tr><td class="paramname">size</td><td>Size of memory allocated by coding_ptrs/data_ptrs in bytes. </td></tr>
    <tr><td class="paramname">packetsize</td><td>The size of a coding block with bitmatrix coding. When you code with a bitmatrix, you will use w packets of size packetsize. </td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000012">Todo:</a></b></dt><dd><p class="startdd">return data </p>
<p>formula </p>
<p>fix </p>
<p class="enddd">example code </p>
</dd></dl>

</div>
</div>
<a class="anchor" id="a5b4bbb1fe3a6ca30468d8d021ee7dc8d"></a><!-- doxytag: member="jerasure.c::jerasure_schedule_encode" ref="a5b4bbb1fe3a6ca30468d8d021ee7dc8d" args="(int k, int m, int w, int **schedule, char **data_ptrs, char **coding_ptrs, int size, int packetsize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void jerasure_schedule_encode </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>w</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int **&#160;</td>
          <td class="paramname"><em>schedule</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>data_ptrs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>coding_ptrs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>packetsize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function encodes with a previously created schedule. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">k</td><td>Number of data devices </td></tr>
    <tr><td class="paramname">m</td><td>Number of coding devices </td></tr>
    <tr><td class="paramname">w</td><td>Word size </td></tr>
    <tr><td class="paramname">schedule</td><td>Array of schedule operations. If there are m operations, then schedule[m][0] = -1. </td></tr>
    <tr><td class="paramname">data_ptrs</td><td>Array of k pointers to data which is size bytes. Size must be a multiple of sizeof(long). Pointers must also be longword aligned. </td></tr>
    <tr><td class="paramname">coding_ptrs</td><td>Array of m pointers to coding data which is size bytes </td></tr>
    <tr><td class="paramname">size</td><td>Size of memory allocated by data_ptrs in bytes. </td></tr>
    <tr><td class="paramname">packetsize</td><td>The size of a coding block with bitmatrix coding. When you code with a bitmatrix, you will use w packets of size packetsize. </td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="jerasure_8h.html#a3a5d41811a6385a6d20230cb6d76b553">jerasure_dumb_bitmatrix_to_schedule(int k, int m, int w, int *bitmatrix)</a> </dd>
<dd>
<a class="el" href="jerasure_8h.html#a419871f932d9c6ada171eab27ef220d6">jerasure_smart_bitmatrix_to_schedule(int k, int m, int w, int *bitmatrix)</a> </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000009">Todo:</a></b></dt><dd>example code </dd></dl>

</div>
</div>
<a class="anchor" id="a419871f932d9c6ada171eab27ef220d6"></a><!-- doxytag: member="jerasure.c::jerasure_smart_bitmatrix_to_schedule" ref="a419871f932d9c6ada171eab27ef220d6" args="(int k, int m, int w, int *bitmatrix)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int** jerasure_smart_bitmatrix_to_schedule </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>w</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>bitmatrix</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function turns a bitmatrix into a schedule, but tries to use previous dot products to calculate new ones. This is the optimization explained in the original Liberation code paper. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">k</td><td>Number of data devices </td></tr>
    <tr><td class="paramname">m</td><td>Number of coding devices </td></tr>
    <tr><td class="paramname">w</td><td>Word size </td></tr>
    <tr><td class="paramname">bitmatrix</td><td>Array of k*m*w*w integers. It represents an mw by kw matrix. Element i,j is in matrix[i*k*w+j] </td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000003">Todo:</a></b></dt><dd><p class="startdd">return data </p>
<p class="enddd">example code </p>
</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="jerasure_8h.html#adfc3cbe91ca6a418329eee7810887c57">jerasure_free_schedule_cache(int k, int m, int ***cache)</a> </dd>
<dd>
<a class="el" href="jerasure_8h.html#a3a5d41811a6385a6d20230cb6d76b553">jerasure_dumb_bitmatrix_to_schedule(int k, int m, int w, int *bitmatrix)</a> </dd></dl>

</div>
</div>
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Sun Nov 27 2011 16:23:45 for Jerasure by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.5.1
</small></address>

</body>
</html>
